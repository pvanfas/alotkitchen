{% extends 'web/base.html' %}
{% load static %}


{% block content %}

<section style="background: #F4F1EA;">
	<div class="container section_padding packages">

		<div class="row">

			<div class="col-12 mb-6">
				<div class="row">
					{% for group, categories in grouped_meal_categories.items %}
					<div class="col-md-6 text-center mb-4">
						<h6 class="fw-bold">{{ group }}</h6>
						{% for category in categories %}
						<a href="{{item.get_absolute_url}}" class="btn btn-white me-3 mb-2 border-dark">{{category}}</a>
						{% endfor %}
					</div>
					{% endfor %}
				</div>
			</div>			
			
			<div class="col-lg-12 col-md-12 col-sm-12 col-12">
				<div class="table-responsive border border-dark">

					<table class="table price-table">
						<tbody>
							<tr>
								<td class="price-blank"></td>
								<td class="price-blank"></td>
								<td class="price-blank"></td>
								<td class="price-table-popular">Most popular</td>
							</tr>
							<tr class="price-table-head">
								<td></td>
								<td>22 DAYS</td>
								<td>26 DAYS</td>
								<td class="green-width">30 DAYS</td>
							</tr>
							<tr>
								<td><a href="#asset-updates" class="price-table-help"></a> Sites</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
							</tr>
							<tr>
								<td><a href="#core-updates" class="price-table-help"></a> Data Retention</td>
								<td>30 Days</td>
								<td>90 Days</td>
								<td>180 Days</td>
							</tr>
							<tr>
								<td><a href="#security-monitoring" class="price-table-help"></a> Chart Annotations</td>
								<td><i class="fas fa-times"></i></td>
								<td><i class="fas fa-check"></i></td>
								<td><i class="fas fa-check"></i></td>
							</tr>
							<tr>
								<td><a href="#uptime-monitoring" class="price-table-help"></a> Uptime Monitoring</td>
								<td><i class="fas fa-times"></i></td>
								<td><i class="fas fa-check"></i></td>
								<td><i class="fas fa-check"></i></td>
							</tr>
							<tr>
								<td><a href="#malware-cleanup" class="price-table-help"></a> Weekly Reports</td>
								<td><i class="fas fa-times"></i></td>
								<td><i class="fas fa-check"></i></td>
								<td><i class="fas fa-check"></i></td>
							</tr>
							<tr>
								<td><a href="#security-audit" class="price-table-help"></a> Security Audit</td>
								<td><i class="fas fa-times"></i></td>
								<td><i class="fas fa-check"></i></td>
								<td><i class="fas fa-check"></i></td>
							</tr>
							<tr>
								<td><a href="#security-audit" class="price-table-help"></a> On-Demand Audit</td>
								<td><i class="fas fa-times"></i></td>
								<td><i class="fas fa-times"></i></td>
								<td><i class="fas fa-check"></i></td>
							</tr>
							<tr>
								<td><a href="#priority-support" class="price-table-help"></a> Priority Support</td>
								<td><i class="fas fa-times"></i></td>
								<td><i class="fas fa-times"></i></td>
								<td><i class="fas fa-check"></i></td>
							</tr>
							<tr>
								<td><a href="#billing" class="price-table-help"></a> Easy Billing + No Contracts</td>
								<td><i class="fas fa-check"></i></td>
								<td><i class="fas fa-check"></i></td>
								<td><i class="fas fa-check"></i></td>
							</tr>
							<tr>
								<td></td>
								<td class="price">
									<a href="#">Get started</a>
								</td>
								<td class="price">
									<a href="#">Get started</a>
								</td>
								<td class="price">
									<a href="#">Get started</a>
								</td>
							</tr>
						</tbody>
					</table>

					
					{% comment %} 
					<table class="table table-bordered nowrap">
						<thead>
							<tr>
								<td style="width:10%;"></td>
								{% for mealtype in mealtypes %}
								<td style="max-width:22%;">{{ mealtype }}</td>
								{% endfor %}
							</tr>
						</thead>
						<tbody>
							{% for entry in structured_table_data %}
							<tr>
								<td style="width:10%;">{{ entry.day }}</td>
								{% for meal in entry.meals %}
								<td style="max-width:22%;">
									<ul class="ps-3 list-style-cricle">
										{% for combo_name in meal.combos %}
										<li>{{ combo_name }}</li>
										{% endfor %}
									</ul>
								</td>
								{% endfor %}
							</tr>
							{% endfor %}
						</tbody>
					</table>					 
					{% endcomment %}
					
				</div>
			</div>
			
		</div>
	</div>
</section>


<section style="background: #F4F1EA;" class="section_padding_sm cta pt-0">
	<div class="container">
		<div class="row">
			<div class="col-12">
				<div class="thumb">
					<div class="card cta_card">
						<h2>GET STARTED TODAY</h2>
						<p>Get started with our meal plans and enjoy the best food in the town. We offer a wide range of meal plans to choose from. </p>
						<div class="btn_container mt-4">
							<a href="{% url 'web:customize_menu' %}?tier={{tier}}" class="btn btn-primary">Subscribe</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>


{% endblock content %}


{% block javascript %}
<script>
	document.addEventListener("DOMContentLoaded", function() {
		// Get the table
		const table = document.querySelector("table");
	
		// Get all rows
		const rows = table.querySelectorAll("tr");
	
		if (rows.length === 0) return; // No rows to process
	
		// Iterate over each column index
		for (let colIndex = 0; colIndex < rows[0].cells.length; colIndex++) {
			let hideColumn = true;
	
			// Start from 1 to skip the header row
			for (let rowIndex = 1; rowIndex < rows.length; rowIndex++) {
				const cell = rows[rowIndex].cells[colIndex];
				if (cell && cell.textContent.trim() !== "") {
					hideColumn = false;
					break;
				}
			}
	
			// If all cells in the column are empty, hide the column
			if (hideColumn) {
				for (let rowIndex = 0; rowIndex < rows.length; rowIndex++) {
					rows[rowIndex].cells[colIndex].style.display = "none";
				}
			}
		}
	});	
</script>
{% endblock %}
