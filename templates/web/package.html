{% extends 'web/base.html' %}
{% load static %}


{% block content %}

<section style="background: #F4F1EA;">
	<div class="container section_padding packages">
		<div class="row">
			<div class="col-12 text-center mb-4">
				
				<a href="{% url 'web:essential' %}" class="btn btn-white me-3 mb-2 {% if tier == 'Essential' %}border-dark{% endif %}">Essential</a>
				<a href="{% url 'web:classicveg' %}" class="btn btn-white me-3 mb-2 {% if tier == 'ClassicVeg' %}border-dark{% endif %}">Classic Veg</a>
				<a href="{% url 'web:classicnonveg' %}" class="btn btn-white me-3 mb-2 {% if tier == 'ClassicNonVeg' %}border-dark{% endif %}">Classic Nonveg</a>
				<a href="{% url 'web:standardveg' %}" class="btn btn-white me-3 mb-2 {% if tier == 'StandardVeg' %}border-dark{% endif %}">Standard Veg</a>
				<a href="{% url 'web:standardnonveg' %}" class="btn btn-white me-3 mb-2 {% if tier == 'StandardNonVeg' %}border-dark{% endif %}">Standard Nonveg</a>
			</div>
			
			<div class="col-lg-12 col-md-12 col-sm-12 col-12">
				<div class="table-responsive border border-dark">

					<table class="table table-bordered nowrap">
						<thead>
							<tr>
								<td style="width:10%;"></td>
								{% for mealtype in mealtypes %}
								<td style="max-width:22%;">{{ mealtype }}</td>
								{% endfor %}
							</tr>
						</thead>
						<tbody>
							{% for entry in structured_table_data %}
							<tr>
								<td style="width:10%;">{{ entry.day }}</td>
								{% for meal in entry.meals %}
								<td style="max-width:22%;">
									<ul class="ps-3 list-style-cricle">
										{% for combo_name in meal.combos %}
										<li>{{ combo_name }}</li>
										{% endfor %}
									</ul>
								</td>
								{% endfor %}
							</tr>
							{% endfor %}
						</tbody>
					</table>					
					
				</div>
			</div>
			
		</div>
	</div>
</section>


<section style="background: #F4F1EA;" class="section_padding_sm cta pt-0">
	<div class="container">
		<div class="row">
			<div class="col-12">
				<div class="thumb">
					<div class="card cta_card">
						<h2>GET STARTED TODAY</h2>
						<p>Get started with our meal plans and enjoy the best food in the town. We offer a wide range of meal plans to choose from. </p>
						<div class="btn_container mt-4">
							<a href="{% url 'web:customize_menu' %}?tier={{tier}}" class="btn btn-primary">Subscribe</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>


{% endblock content %}


{% block javascript %}
<script>
	document.addEventListener("DOMContentLoaded", function() {
		// Get the table
		const table = document.querySelector("table");
	
		// Get all rows
		const rows = table.querySelectorAll("tr");
	
		if (rows.length === 0) return; // No rows to process
	
		// Iterate over each column index
		for (let colIndex = 0; colIndex < rows[0].cells.length; colIndex++) {
			let hideColumn = true;
	
			// Start from 1 to skip the header row
			for (let rowIndex = 1; rowIndex < rows.length; rowIndex++) {
				const cell = rows[rowIndex].cells[colIndex];
				if (cell && cell.textContent.trim() !== "") {
					hideColumn = false;
					break;
				}
			}
	
			// If all cells in the column are empty, hide the column
			if (hideColumn) {
				for (let rowIndex = 0; rowIndex < rows.length; rowIndex++) {
					rows[rowIndex].cells[colIndex].style.display = "none";
				}
			}
		}
	});	
</script>
{% endblock %}
